import { world, system } from "@minecraft/server";
import { prefix } from "../../config";
import { error, state } from "../../text/en-US";
import { language } from "../../text/languageHandler";

const _0x46931b=_0x376e;function _0x376e(_0xe15b42,_0x47149d){const _0x49e107=_0x49e1();return _0x376e=function(_0x376eab,_0x5318cd){_0x376eab=_0x376eab-0x1c4;let _0x2d307f=_0x49e107[_0x376eab];return _0x2d307f;},_0x376e(_0xe15b42,_0x47149d);}function _0x49e1(){const _0x12c2bd=['6OxLdJB','unknownCommand','get','trim','4404043iRiNaN','cantExecute','split','12wzCULE','cancel','has','beforeEvents','startsWith','11582451mNCebx','commands','289967rEzWdT','command','sender','length','1886676ssaiMY','getCommand','set','map','error','chatSend','6612260EJWHCO','816544QRVBBo','subscribe','from','keys','825750ioTKXs','getAllCommands','Error\x20handling\x20chat\x20message:','§a:§c\x20','description'];_0x49e1=function(){return _0x12c2bd;};return _0x49e1();}(function(_0x4bfb97,_0x518f9d){const _0x368351=_0x376e,_0x4bbad4=_0x4bfb97();while(!![]){try{const _0x22dbe1=parseInt(_0x368351(0x1cf))/0x1*(-parseInt(_0x368351(0x1c8))/0x2)+parseInt(_0x368351(0x1de))/0x3+parseInt(_0x368351(0x1d3))/0x4+parseInt(_0x368351(0x1d9))/0x5+parseInt(_0x368351(0x1e3))/0x6*(-parseInt(_0x368351(0x1c5))/0x7)+-parseInt(_0x368351(0x1da))/0x8+parseInt(_0x368351(0x1cd))/0x9;if(_0x22dbe1===_0x518f9d)break;else _0x4bbad4['push'](_0x4bbad4['shift']());}catch(_0x23d8bb){_0x4bbad4['push'](_0x4bbad4['shift']());}}}(_0x49e1,0xd822b));class CommandBuilder{constructor(){this['commands']=new Map();}['registerCommand'](_0x400206,_0x4dc78a,_0x2bd36e){const _0x4d379e=_0x376e;this[_0x4d379e(0x1ce)][_0x4d379e(0x1d5)](_0x400206,{'description':_0x4dc78a,'handler':_0x2bd36e});}['handleChatMessage'](_0x5971e2,_0x10590b){const _0x3f3b66=_0x376e;try{if(_0x5971e2[_0x3f3b66(0x1cc)](prefix)){const _0x5eecb3=_0x5971e2['slice'](prefix[_0x3f3b66(0x1d2)])[_0x3f3b66(0x1c4)]()[_0x3f3b66(0x1c7)](/\s+/),_0x444b69=_0x5eecb3['shift']();if(this['commands'][_0x3f3b66(0x1ca)](_0x444b69)){if(_0x10590b&&_0x10590b['isOp']()){const {handler:_0x14cf3b}=this['commands'][_0x3f3b66(0x1e5)](_0x444b69);this['commands'][_0x3f3b66(0x1e5)](_0x444b69)['handler'](_0x5971e2,_0x10590b,_0x444b69,_0x5eecb3);}else console['error'](error[_0x3f3b66(0x1c6)],_0x3f3b66(0x1d0),_0x10590b);}else _0x10590b&&_0x10590b['sendMessage'](language(error[_0x3f3b66(0x1e4)],'command',_0x444b69));}}catch(_0x194ee7){console[_0x3f3b66(0x1d7)](_0x3f3b66(0x1e0),_0x194ee7);}}[_0x46931b(0x1df)](){const _0x5ef13f=_0x46931b,_0x2cccb1=Array[_0x5ef13f(0x1dc)](this[_0x5ef13f(0x1ce)][_0x5ef13f(0x1dd)]())[_0x5ef13f(0x1d6)](_0x1a21af=>'§e'+_0x1a21af+_0x5ef13f(0x1e1)+this[_0x5ef13f(0x1ce)][_0x5ef13f(0x1e5)](_0x1a21af)[_0x5ef13f(0x1e2)])['join'](',\x0a');return _0x2cccb1;}[_0x46931b(0x1d4)](_0x5756e0){const _0x2809e7=_0x46931b;return this['commands'][_0x2809e7(0x1e5)](_0x5756e0);}}export const commandBuilder=new CommandBuilder();world[_0x46931b(0x1cb)][_0x46931b(0x1d8)][_0x46931b(0x1db)](_0x41b27c=>{const _0x486bde=_0x46931b;if(!_0x41b27c['sender']['isOp']())return _0x41b27c[_0x486bde(0x1c9)]=![];system['run'](()=>{const _0x47485f=_0x486bde;commandBuilder['handleChatMessage'](_0x41b27c['message'],_0x41b27c[_0x47485f(0x1d1)]);});if(_0x41b27c['message'][_0x486bde(0x1cc)](prefix))return _0x41b27c['cancel']=!![];});
